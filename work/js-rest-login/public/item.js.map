{"version":3,"sources":["webpack://js-rest-login/./src/services.js","webpack://js-rest-login/webpack/bootstrap","webpack://js-rest-login/webpack/runtime/define property getters","webpack://js-rest-login/webpack/runtime/hasOwnProperty shorthand","webpack://js-rest-login/webpack/runtime/make namespace object","webpack://js-rest-login/./src/item.js"],"names":["fetchLogin","username","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","errorCode","then","response","ok","json","err","fetchGetItems","fetchAddItems","text","credentials","fetchUpdateScore","score","fetchLogout","list","document","querySelector","addItem","newItem","itemStatus","itemScore","inventoryPanel","loginStatus","newUser","addUser","logout","loginPanel","status","errorMessages","itemState","pollId","isLoggedIn","users","inventory","error","renderPage","renderLogin","renderInventory","renderErrors","show","innerHTML","disabled","innerText","renderItems","items","itemList","map","item","itemId","itemName","quantity","join","addEventListener","event","target","classList","contains","value","Object","values","poll","shouldPoll","setInterval","clearTimeout"],"mappings":"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","file":"item.js","sourcesContent":["\"use strict\";\nexport const fetchLogin = (username) => {\n    return fetch('/session', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ username }),\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error'}) )\n    . then( (response) => {\n        if(!response.ok) {\n            return response.json().then( err => Promise.reject(err) );\n        }\n        return response.json();\n    });\n};\n\nexport const fetchGetItems = () => {\n    return fetch('/items', {\n        method: 'GET',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error'}) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) );\n        }\n        return response.json();\n    });\n};\n\nexport const fetchAddItems = (text) => {\n    return fetch('/items', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ text }),\n        credentials: 'include',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error' }) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return response.json();\n    });\n};\n\nexport const fetchUpdateScore = (score) => {\n    return fetch('/items', {\n        method: 'PATCH',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ score }),\n        credentials: 'include',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error' }) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return response.json();\n    });\n};\n\nexport const fetchLogout = () => {\n    return fetch('/session', {\n        method: 'DELETE',\n        headers: new Headers({\n            'content-type': 'application/json'\n        })\n    })\n    .catch( () => Promise.reject({errorCode: 'network-error'}) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return;\n    });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\nimport {\n\tfetchLogin,\n\tfetchGetItems,\n\tfetchAddItems,\n\tfetchLogout,\n\tfetchUpdateScore\n} from './services';\n\n   //inventory list elements\n    const list = document.querySelector('.items');\n    const addItem = document.querySelector('.add-button');\n    const newItem = document.querySelector('.to-add-item');\n    const itemStatus = document.querySelector('.item-status');\n    const itemScore = document.querySelector('.rate-item');\n    const inventoryPanel = document.querySelector('.list-app');\n\n    //login logout elements\n    const loginStatus = document.querySelector('.login-status');\n    const newUser = document.querySelector('.user-name');\n    const addUser = document.querySelector('.login-button');\n    const logout = document.querySelector('.logout-button');\n    const loginPanel = document.querySelector('.login-panel');\n    const status = document.querySelector('.status');\n\n\n    const errorMessages = {\n        'missing-item-name': \"Please enter a valid item name\",\n        'duplicate-name': \"This item is already in the list, please try another one\",\n        'invalid-quantity': \"Invalid quantity\",\n        'missing-item': \"The item doesn't exist, please try again\",\n        'network-error': \"There is a problem connecting to the network, try again\",\n        'invalid-username': \"Please enter a valid username without whitespace & 'dog'\",\n        'missing-user': \"The user doesn't exist, please try again\",\n        'invalid-score': \"Please enter a valid integer from 1 to 5\",\n        'missing-score': \"The score doesn't exist, please try again\"\n    }\n\n    const itemState = {\n    \tpollId: null,\n    \tisLoggedIn: false,\n    \tusers: [],\n    \tinventory: [],\n    \terror:''\n    }\n\n    function renderPage() {\n    \tif (itemState.isLoggedIn) {\n    \t\trenderLogin(false);\n    \t\trenderInventory(true);\n    \t} else {\n    \t\trenderLogin(true);\n    \t\trenderInventory(false);\n    \t}\n    \trenderErrors(itemState.error);\n    }\n\n    function renderLogin(show) {\n    \tif(show) {\n    \t\tloginPanel.innerHTML = `\n    \t\t\t<input class=\"user-name\" type=\"text\" placeholder=\"Please enter a username\" />\n      \t\t\t<button class=\"login-button\" type=\"button\">Sign in</button>\n    \t\t`;\n    \t\tloginPanel.querySelector(`.login-button`).disabled = true;\n    \t} else {\n    \t\tloginPanel.innerHTML = ``;\n    \t}\n    }\n\n    function renderErrors(error) {\n    \tstatus.innerText = errorMessages[error] || error;\n\t}\n\n\tfunction renderInventory(show) {\n\t    if(show) {\n\t        inventoryPanel.innerHTML = `\n\t        \t<h2 class=\"title\">Inventory List</h2> \n\t\t        <div class=\"logout\">\n\t\t        \t<button class=\"logout-button\" type=\"button\">Sign out</button>\n\t\t        </div>\n\t\t      \t<div class=\"add-item\">\n\t\t\t        Add Item:\n\t\t\t        <input class=\"to-add-item\" type=\"text\" placeholder=\"Please enter a new item\"/>\n\t\t\t        <input type=\"text\" class=\"rate-item\" placeholder=\"Please rate the item from 1 to 5\" />\n\t\t\t        <button class=\"add-button\" type=\"button\">Add</button>\n\t\t      \t</div>\n\t\t      \t<div class=\"inventory-panel\">\n\t\t        \t<ul class=\"items\"> </ul>\n\t\t      \t</div>  \n\t        `;\n\n\t        inventoryPanel.querySelector('.add-button').disabled = true;\n\t        //renderUsers(itemState.users);\n\t        renderItems(itemState.inventory);\n\t    } else {\n\t        inventoryPanel.innerHTML = ``;\n\t    } \n\t}\n\n\tfunction renderItems( items ) {\n\t    const itemList = inventoryPanel.querySelector('.items'); \n\t    itemList.innerHTML = items.map( (item) => {\n\t    \treturn`\n\t    \t<li class=\"item-info\">\n                <span class=\"item-name\" data-item-id=\"${item.itemId}\"> ${item.itemName}</span>\n                <button class=\"decrease\" data-item-id=\"${item.itemId}\" ${item.quantity <= 0 ? \"disabled\" : \"\"}> - </button>\n                <span class=\"item-quantity\" data-item-id=\"${item.itemId}\"> ${item.quantity}</span>\n                <button class=\"increase\" data-item-id=\"${item.itemId}\"> + </button>\n                <span class=\"item-score\" data-item-id=\"${item.itemId}\"> score: ${item.score} </span>\n                <button class=\"update-score\" data-item-id=\"${item.itemId}\"> Update </button>\n                <button class=\"delete-item\" data-item-id=\"${item.itemId}\"> X </button>\n            </li>\n\t    \t`}).join('');\n\t}\n\n\tloginPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('login-button')) {\n\t        return;\n\t    }\n\n\t    const addUser = loginPanel.querySelector('.user-name');\n\t    const username = addUser.value;\n\t    addUser.value = '';\n\n\t    fetchLogin(username)\n\t    .then( (items) => {\n\t        itemState.isLoggedIn = true;\n\t        itemState.users = Object.values(users);\n\t        itemState.items = Object.values(items);\n\t        itemState.error = '';\n\t        renderPage();\n\t        poll(true);\n\t    })\n\t    .catch( (err) => {\n\t        itemState.error = err.errorCode;\n\t        renderPage();\n\t    });   \n\t});\n\n\tloginPanel.addEventListener('keyup', (event) => {\n\t\tif(!event.target.classList.contains('user-name')) {\n           return;\n    \t}\n\t\tconst text = event.target.value;\n\t    loginPanel.querySelector('.login-button').disabled = !text;\n\t});\n\n\tfunction poll(shouldPoll) {\n    \tif(shouldPoll && !itemState.pollId) {\n\t        itemState.pollId = setInterval( () => {\n\t            fetchGetItems()\n\t            .then( (items) => {\n\t                itemState.users = Object.values(users);\n\t\t        \titemState.items = Object.values(items);\n\t                itemState.error = '';\n\t                renderItems(itemState.items);\n\t            })\n\t            .catch( (err) => {\n\t                if(err.errorCode === 'missing-user') {\n\t                    itemState.isLoggedIn = false;\n\t                    itemState.error = '';\n\t                    renderPage();\n\t                    poll(false);\n\t                    return;\n\t                }\n\n\t                itemState.error = err.errorCode;\n\t                renderErrors(itemState.error);\n\t            });\n\t        }, 3000);\n    \t}\n\n\t    if(!shouldPoll && itemState.pollId) {\n\t        clearTimeout(itemState.pollId);\n\t        itemState.pollId = null;\n\t    }\n\t}\n\n\tinventoryPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('add-button')) {\n\t        return;\n\t    }\n\t    \n\t    const newItem = document.querySelector('.to-add-item');\n\t    const itemName = newItem.value;\n\t    newItem.value = '';\n\t    let quantity = 0;\n\t    const itemScore = document.querySelector('.rate-item');\n        let score = itemScore.value;\n\n\t    fetchAddItems({itemName, quantity, score})\n\t    .then( (items) => {\n\t        itemState.inventory = Object.values(items);\n\t        renderPage();\n\t    })\n\t    .catch( (err) => {\n\t        itemState.error = err.errorCode;\n\t        renderPage();\n\t    });\n\t});\n\n\tinventoryPanel.addEventListener('keyup', (event) => {\n        if(!event.target.classList.contains('to-add-item')) {\n        return;\n    }\n\t\tconst text = event.target.value;\n\t    inventoryPanel.querySelector('.add-button').disabled = !text;\n    });\n\n\n    inventoryPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('logout-button')) {\n\t        return;\n\t    }\n\n\t    fetchLogout()\n\t    .then( () => {\n\t        itemState.isLoggedIn = false;\n\t        itemState.items = [];\n\t        itemState.users = [];\n\t        itemState.error = '';\n\t        poll(false);\n\t        renderPage();  \n\t    })\n\t    .catch( (err) => {\n\t        itemState.error = err.errorCode;   \n\t        poll(false);\n\t        renderPage();\n\t    })\n\t});\n\n\tfetchGetItems()\n\t.then( (items) => {\n\t    itemState.users = Object.values(users);\n\t\titemState.items = Object.values(items);\n\t    itemState.error = '';\n\t    itemState.isLoggedIn = true;\n\t    renderPage();\n\t    poll(true);\n\t})\n\t.catch( (err) => {\n\t    itemState.isLoggedIn = false;\n\t    poll(false);\n\t    renderPage();\n\t});\n\n"],"sourceRoot":""}