{"version":3,"sources":["webpack://js-rest-login/./src/services.js","webpack://js-rest-login/webpack/bootstrap","webpack://js-rest-login/webpack/runtime/define property getters","webpack://js-rest-login/webpack/runtime/hasOwnProperty shorthand","webpack://js-rest-login/webpack/runtime/make namespace object","webpack://js-rest-login/./src/app.js"],"names":["fetchLogin","username","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","errorCode","then","response","ok","json","err","fetchLoginStatus","code","fetchGetItems","fetchAddItems","text","credentials","fetchUpdateScore","itemId","action","fetchDeleteItems","fetchLogout","inventoryPanel","document","querySelector","loginPanel","status","errorMessages","appState","pollId","isLoggedIn","items","error","renderPage","sort","renderLogin","renderInventory","renderErrors","show","innerHTML","disabled","innerText","getButton","renderItems","itemList","sortItems","map","item","score","join","addEventListener","event","target","classList","contains","addUser","value","getItems","poll","shouldPoll","setInterval","getAttribute","clearTimeout","currentItemList","Object","keys","forEach","key","sender","values","a","b","newItem","dataset","toString","renderUser","buttonId","users","name"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\nexport const fetchLogin = (username) => {\n    return fetch('/session', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ username }),\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error'}) )\n    . then( (response) => {\n        if(!response.ok) {\n            return response.json().then( err => Promise.reject(err) );\n        }\n        return response.json();\n    });\n};\n\nexport const fetchLoginStatus = () => {\n    return fetch(\"/session\", {\n        method: \"GET\"\n    })\n    .catch(() => {\n        return Promise.reject({ code: \"network-error\" });\n    })\n    .then((response) => {\n        if (!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) );\n        }\n        return response.json();\n    });\n};\n\nexport const fetchGetItems = () => {\n    return fetch('/items', {\n        method: 'GET',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error'}) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) );\n        }\n        return response.json();\n    });\n};\n\nexport const fetchAddItems = (text) => {\n    return fetch('/items', {\n        method: 'POST',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ text }),\n        credentials: 'include',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error' }) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return response.json();\n    });\n};\n\nexport const fetchUpdateScore = (itemId, action) => {\n    return fetch(`/items/${itemId}`, {\n        method: 'PATCH',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        body: JSON.stringify({ action }),\n        credentials: 'include',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error' }) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return response.json();\n    });\n};\n\nexport const fetchDeleteItems = (itemId) => {\n    return fetch(`/items/${itemId}`, {\n        method: 'DELETE',\n        headers: new Headers({\n            'content-type': 'application/json'\n        }),\n        credentials: 'include',\n    })\n    .catch( () => Promise.reject({ errorCode: 'network-error' }) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return response.json();\n    });\n};\n\nexport const fetchLogout = () => {\n    return fetch('/session', {\n        method: 'DELETE',\n        headers: new Headers({\n            'content-type': 'application/json'\n        })\n    })\n    .catch( () => Promise.reject({errorCode: 'network-error'}) )\n    .then( (response) => {\n        if(!response.ok) {\n            return response.json().then( (err) => Promise.reject(err) )\n        }\n        return;\n    });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\nimport {\n\tfetchLogin,\n\tfetchGetItems,\n\tfetchAddItems,\n\tfetchLogout,\n\tfetchUpdateScore,\n\tfetchLoginStatus,\n\tfetchDeleteItems\n} from './services';\n\n   //inventory list elements\n    // const list = document.querySelector('.items');\n    // const addItem = document.querySelector('.add-button');\n    // const newItem = document.querySelector('.to-add-item');\n    // const itemStatus = document.querySelector('.item-status');\n    // const itemScore = document.querySelector('.rate-item');\n    const inventoryPanel = document.querySelector('.list-app');\n\n    //login logout elements\n    // const loginStatus = document.querySelector('.login-status');\n    // const newUser = document.querySelector('.user-name');\n    // const addUser = document.querySelector('.login-button');\n    // const logout = document.querySelector('.logout-button');\n    const loginPanel = document.querySelector('.login-panel');\n    const status = document.querySelector('.status');\n\n\n    const errorMessages = {\n        'missing-item-name': \"Please enter a valid item name\",\n        'duplicate-name': \"This item is already in the list, please try another one\",\n        'invalid-quantity': \"Invalid quantity\",\n        'missing-item': \"The item doesn't exist, please try again\",\n        'network-error': \"There is a problem connecting to the network, try again\",\n        'invalid-username': \"Please enter a valid username without whitespace & 'dog'\",\n        'missing-user': \"The user doesn't exist, please try again\",\n        'invalid-score': \"Please enter a valid integer from 1 to 5\",\n        'missing-score': \"The score doesn't exist, please try again\"\n    }\n\n    const appState = {\n    \tpollId: null,\n    \tisLoggedIn: false,\n    \tusername: null,\n    \titems: {},\n    \terror:''\n    }\n\n    function renderPage(sort) {\n    \tif (appState.isLoggedIn) {\n    \t\trenderLogin(false);\n    \t\trenderInventory(true, sort);\n    \t} else {\n    \t\trenderLogin(true);\n    \t\trenderInventory(false, sort);\n    \t}\n    \trenderErrors(appState.error);\n    }\n\n    function renderLogin(show) {\n    \tif(show) {\n    \t\tloginPanel.innerHTML = `\n    \t\t\t<input class=\"user-name\" type=\"text\" placeholder=\"Please enter a username\" />\n      \t\t\t<button class=\"login-button\" type=\"button\">Sign in</button>\n    \t\t`;\n    \t\tloginPanel.querySelector(`.login-button`).disabled = true;\n    \t} else {\n    \t\tloginPanel.innerHTML = ``;\n    \t}\n    }\n\n    function renderErrors(error) {\n    \tstatus.innerText = errorMessages[error] || error;\n\t}\n\n\tfunction getButton(sort) {\n\t    if(sort === \"low-to-high\"){\n\t        return `\n\t            <button class=\"sort-button\" data-button-id = \"low-to-high\" type=\"button\"> Sort score by low-to-high</button>\n\t        `;\n\t    } else {\n\t        return `\n\t            <button class=\"sort-button\" data-button-id = \"high-to-low\" type=\"button\"> Sort score by high-to-low</button>\n\t        `;\n\t    }\n\t}\n\n\tfunction renderInventory(show, sort) {\n\t    if(show) {\n\t        inventoryPanel.innerHTML = `\n\t        \t<h2 class=\"title\">Inventory List</h2> \n\t\t        <div class=\"logout\">\n\t\t        \t<button class=\"logout-button\" type=\"button\">Sign out</button>\n\t\t        </div>\n\t\t      \t<div class=\"add-item\">\n\t\t\t        Add Item:\n\t\t\t        <input class=\"to-add-item\" type=\"text\" placeholder=\"Please enter a new item\"/>\n\t\t\t        <button class=\"add-button\" type=\"button\">Add</button>\n\t\t      \t</div>\n\t\t      \t<div> ` + getButton(sort) + `</div>\n\t\t      \t<div class=\"inventory-panel\">\n\t\t        \t<ul class=\"items\"> </ul>\n\t\t      \t</div>  \n\t        `;\n\n\t        inventoryPanel.querySelector('.add-button').disabled = true;\n\t        renderItems(appState.items, sort);\n\t    } else {\n\t        inventoryPanel.innerHTML = ``;\n\t    } \n\t}\n\n\tfunction renderItems( items, sort ) {\n\t    const itemList = inventoryPanel.querySelector('.items'); \n\t    sortItems(items, sort);\n\t    itemList.innerHTML = items.map( (item) => {\n\t    \treturn`\n\t    \t<li class=\"item-info\">\n                <span class=\"item-name\" data-item-id=\"${item.itemId}\"> ${item.text}</span>\n                <button class=\"decrease\" data-item-id=\"${item.itemId}\" ${item.score <= 1 ? \"disabled\" : \"\"}> - </button>\n                <span class=\"item-score\" data-item-id=\"${item.itemId}\"> score: ${item.score} </span>\n                <button class=\"increase\" data-item-id=\"${item.itemId}\" ${ item.score >= 5 ? 'disabled' : ''}> + </button>\n                <button class=\"delete-item\" data-item-id=\"${item.itemId}\"> X </button>\n            </li>\n\t    \t`}).join('');\n\t}\n\n\tloginPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('login-button')) {\n\t        return;\n\t    }\n\n\t    const addUser = loginPanel.querySelector('.user-name');\n\t    const username = addUser.value;\n\t    addUser.value = '';\n\n\t    fetchLogin(username)\n\t    .then( (items) => {\n\t        appState.isLoggedIn = true;\n\t        appState.username = username;\n\t        appState.items = getItems(items.itemList, appState.username);\n\t        appState.error = '';\n\t        renderPage(\"high-to-low\");\n\t        poll(true);\n\t    })\n\t    .catch( (err) => {\n\t        appState.error = err.errorCode;\n\t        renderPage(\"high-to-low\");\n\t    });   \n\t});\n\n\tloginPanel.addEventListener('keyup', (event) => {\n\t\tif(!event.target.classList.contains('user-name')) {\n           return;\n    \t}\n\t\tconst text = event.target.value;\n\t    loginPanel.querySelector('.login-button').disabled = !text;\n\t});\n\n\tfunction poll(shouldPoll) {\n    \tif(shouldPoll && !appState.pollId) {\n\t        appState.pollId = setInterval( () => {\n\t            fetchGetItems()\n\t            .then( (items) => {\n\t\t        \tappState.items = getItems(items.itemList, appState.username);\n\t                appState.error = '';\n\t                renderItems(appState.items, inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t            })\n\t            .catch( (err) => {\n\t                if(err.errorCode === 'missing-user') {\n\t                    appState.isLoggedIn = false;\n\t                    appState.error = '';\n\t                    renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t                    poll(false);\n\t                    return;\n\t                }\n\n\t                appState.error = err.errorCode;\n\t                renderErrors(appState.error);\n\t            });\n\t        }, 5000);\n    \t}\n\n\t    if(!shouldPoll && appState.pollId) {\n\t        clearTimeout(appState.pollId);\n\t        appState.pollId = null;\n\t    }\n\t}\n\n\tfunction getItems(itemList, username){\n\t    const currentItemList = {};\n\t    Object.keys(itemList).forEach(function(key){\n\t      const item = itemList[key];\n\t      \n\t      if (item.sender === username) {\n\t        currentItemList[key] = item;\n\t      }\n\t    });\n\t    return Object.values(currentItemList);\n\t}\n\n\tfunction sortItems(items, sort) {\n\t    items.sort(function (a, b) {\n\t        if(sort === \"high-to-low\"){\n\t            return b.score - a.score;\n\t        } else {\n\t            return a.score - b.score;\n\t        }\n\t    })\n\t}\n\n\tinventoryPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('add-button')) {\n\t        return;\n\t    }\n\t    \n\t    const newItem = document.querySelector('.to-add-item');\n\t    const text = newItem.value;\n\t    newItem.value = '';\n\n\t    fetchAddItems(text)\n\t    .then( (items) => {\n\t        appState.item = getItems(items, appState.username);\n\t        renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t    })\n\t    .catch( (err) => {\n\t        appState.error = err.errorCode;\n\t        renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t    });\n\t});\n\n\tinventoryPanel.addEventListener('keyup', (event) => {\n        if(!event.target.classList.contains('to-add-item')) {\n        return;\n    }\n\t\tconst text = event.target.value;\n\t    inventoryPanel.querySelector('.add-button').disabled = !text;\n    });\n\n\tinventoryPanel.addEventListener('click', event => {\n\t    if (!event.target.classList.contains(\"increase\")) {\n\t        return;\n\t    }\n\t    const itemId = event.target.dataset.itemId;\n\t    fetchUpdateScore(itemId, 'increase')\n\t        .then((item) => {\n\t            Object.keys(appState.items).forEach(function(key){\n\t                if(appState.items[key].itemId.toString() === itemId){\n\t                    appState.items[key] = item;\n\t                }\n\t            });\n\n\t            appState.error = '';\n\t            renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t            renderUser(appState.username);\n\t        })\n\t        .catch((err) => {\n\t            appState.error = err.errorCode;\n\t            renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t            renderUser(appState.username);\n\t        });\n\t});\n\n\tinventoryPanel.addEventListener('click', event => {\n\t    if (!event.target.classList.contains(\"decrease\")) {\n\t        return;\n\t    }\n\t    const itemId = event.target.dataset.itemId;\n\t    fetchUpdateScore(itemId, 'decrease')\n\t        .then((item) => {\n\t            Object.keys(appState.items).forEach(function(key){\n\t                if(appState.items[key].itemId.toString() === itemId){\n\t                    appState.items[key] = item;\n\t                }\n\t            });\n\n\t            appState.error = '';\n\t            renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t            renderUser(appState.username);\n\t        })\n\t        .catch((err) => {\n\t            appState.error = err.errorCode;\n\t            renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t            renderUser(appState.username);\n\t        });\n\t});\n\n\tinventoryPanel.addEventListener('click', event => {\n\t    if (!event.target.classList.contains('sort-button')) {\n\t        return;\n\t    }\n\t    let sort = event.target.dataset.buttonId;\n\t    sort = sort === 'high-to-low' ? 'low-to-high' : 'high-to-low';\n\t    renderInventory(true, sort);\n\t})\n\n    inventoryPanel.addEventListener('click', (event) => {\n\t    if(!event.target.classList.contains('logout-button')) {\n\t        return;\n\t    }\n\n\t    fetchLogout()\n\t    .then( () => {\n\t        appState.isLoggedIn = false;\n\t        appState.items = {};\n\t        appState.users = null;\n\t        appState.error = '';\n\t        poll(false);\n\t        renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id')); \n\t    })\n\t    .catch( (err) => {\n\t        appState.error = err.errorCode;   \n\t        poll(false);\n\t        renderPage(inventoryPanel.querySelector('.sort-button').getAttribute('data-button-id'));\n\t\t});\n\t});\t\n\n\tfetchLoginStatus()\n\t.then( (name) => {\n\t    appState.username = name.username;\n\t    appState.isLoggedIn = true;\n\t    poll();\n\t    poll(true);\n\t    renderPage('high-to-low');\n\t})\n\t.catch( (err) => {\n\t    appState.isLoggedIn = false;\n\t    renderPage('high-to-low');\n\t});\n\n"],"sourceRoot":""}